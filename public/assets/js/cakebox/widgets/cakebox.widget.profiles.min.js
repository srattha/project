var cakeboxWidgetProfile=function(t,e){return cakeboxWidget.apply(this,arguments),this.obj=t,this.default_chart_type="table",this.supported_chart_types={table:"Data Table"},this.profile_data=[],this.data_api_url="/api/widget/profile",this.branch_api_url="/api/zone2",this.date_filter_url="/api/datefilters",this.settings=$.extend(!0,this.defaults,e),this.init(),this};cakeboxWidgetProfile.prototype=Object.create(cakeboxWidget.prototype),cakeboxWidgetProfile.prototype.loadData=function(t){var e=this,i=this.data_api_url,a=!0,r=this.getQueryParameter(t);a&&($("#"+this.settings.id+"_loading").show("fast"),$.post(i,r,function(t){e.profile_data=t.data,e.updateChartData()}))},cakeboxWidgetProfile.prototype.setDataSeriesFormat=function(){var t=this,e=[],i=[],a=!1;if(t.demo?a=cakeboxChart.getDemoXAxis(t.settings.chartType):"undefined"!=typeof t.profile_data.xAxis&&t.profile_data.xAxis.length>0&&(a=cakeboxChart.getXAxis(t.settings.chartType,{data:t.profile_data.xAxis})),a!==!1&&"undefined"!=typeof t.chart_options.xAxis&&(t.chart_options.xAxis=[],t.chart_options.xAxis=a),this.demo)e=cakeboxChart.getDemoSerie(t.settings.chartType);else{var r=t.profile_data.series;$.each(r,function(a,r){if(r.data.length>0){var o=0===a?t.settings.chart.color:t.settings.chart.compare.color,s=0===a?t.settings.chart.label.color:t.settings.chart.compare.label.color,n={name:r.name,color:o,txt_color:s},l=cakeboxChart.getSerieFormat(t.settings.chartType,r.data,n);e.push(l),i.push(r.name)}}),"undefined"!=typeof t.chart_options.legend&&"undefined"!=typeof t.chart_options.legend.data&&(t.chart_options.legend.data=[],t.chart_options.legend.data=t.clone(i))}t.chart_options.series=e},function(t){"use strict";t.fn.cakeboxProfiles=function(e){if(this.length>1)return this.each(function(){t(this).cakeboxProfiles(e)}),this;var i={id:"profile",chartType:"bar",chart:{color:"",label:{color:""},compare:{color:"",label:{color:""}}},chartTitle:"PROFILES",fixedHeight:!0,xAxis:{name:"",data:[]},yAxis:{format:"{value} ppl",line:{color:""}},grid:{x:65,x2:20,y:85,y2:25},btn_reload:{id:"profile_reload",title:"Reload data"},btn_remove:{id:"profile_remove",title:"Remove this chart",confirm:"Please confirm to remove this chart"},filters:{enabled:!0,branch:{id:"profile_branch",value:""},compare:{id:"profile_compare",value:""},date:{id:"profile_date",value:""}},loading:"Loading"},a=t.extend(!0,i,e),r=new cakeboxWidgetProfile(this,a);return this.refreshChart=function(){r.refreshChart()},this.removeChart=function(){r.removeChart()},this}}(jQuery);